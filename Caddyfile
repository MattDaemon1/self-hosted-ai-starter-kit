{
	# Configuration globale
	local_certs
}

# Interface principale n8n pour Cloudflare (accepte toutes les requÃªtes HTTPS)
:443 {
	reverse_proxy n8n:5678
	tls internal
	log {
		output file /var/log/caddy/n8n-public.log
	}
}

# Interface principale n8n (fallback)
:80 {
	reverse_proxy n8n:5678
	log {
		output file /var/log/caddy/access.log
	}
}

# API Ollama
:8080 {
	reverse_proxy ollama:11434
	log {
		output file /var/log/caddy/ollama.log
	}
}

# Interface Qdrant
:8081 {
	reverse_proxy qdrant:6333
	log {
		output file /var/log/caddy/qdrant.log
	}
}

# Healthcheck endpoint
:8082 {
	respond /health "OK" 200
}
